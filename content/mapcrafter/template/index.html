<link rel="stylesheet" type="text/css" href="static/css/style.css" />
<link rel="stylesheet" href="static/leaflet/leaflet.css" />
<script src="static/leaflet/leaflet.js"></script>
<style type="text/css">
.leaflet-container {
	background: {backgroundColor};
}
</style>

<div id="mcmap"></div>

<script type="text/javascript" src="static/js/handler/base.js"></script>
<script type="text/javascript" src="static/js/handler/marker.js"></script>
<script type="text/javascript" src="static/js/handler/poshash.js"></script>
<script type="text/javascript" src="static/js/handler/rotationselect.js"></script>
<script type="text/javascript" src="static/js/control/base.js"></script>
<script type="text/javascript" src="static/js/control/html.js"></script>
<script type="text/javascript" src="static/js/control/mapselect.js"></script>
<script type="text/javascript" src="static/js/control/marker.js"></script>
<script type="text/javascript" src="static/js/control/mousepos.js"></script>
<script type="text/javascript" src="static/js/control/rotationselect.js"></script>
<script type="text/javascript" src="static/js/mapcrafterui.js"></script>

<!-- Last update {lastUpdate} -->
<script type="text/javascript">
	var CONFIG = {
		{worlds}
	};
</script>

<script type="text/javascript" src="markers.js"></script>
<script type="text/javascript" src="markers-generated.js"></script>
<script type="text/javascript">
	var Mapcrafter = new MapcrafterUI(CONFIG);
	(function init() {
		Mapcrafter.init();

		Mapcrafter.addControl(new MapSelectControl(), "topright", 1);
		Mapcrafter.addControl(new RotationSelectControl(), "topright", 3);
		Mapcrafter.addControl(new MousePosControl(), "bottomleft", 1);
		// merge the two marker configurations
		var markers = [];
		if(typeof MAPCRAFTER_MARKERS !== "undefined")
			for(var i = 0; i < MAPCRAFTER_MARKERS.length; i++)
				markers.push(MAPCRAFTER_MARKERS[i]);
		if(typeof MAPCRAFTER_MARKERS_GENERATED !== "undefined")
			for(var i = 0; i < MAPCRAFTER_MARKERS_GENERATED.length; i++)
				markers.push(MAPCRAFTER_MARKERS_GENERATED[i]);
		// only create marker control if marker groups exist
		if(markers.length > 0)
			Mapcrafter.addControl(new MarkerControl(markers), "topright", 2);
	})();
</script>
